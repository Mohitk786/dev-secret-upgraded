(()=>{var e={};e.id=872,e.ids=[872],e.modules={986:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},2944:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>d,pages:()=>u,routeModule:()=>p,tree:()=>l});var r=s(24332),i=s(48819),a=s(67851),n=s.n(a),o=s(97540),c={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);s.d(t,c);let l={children:["",{children:["u",{children:["invites",{children:["[inviteId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,97742)),"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/invites/[inviteId]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,90205)),"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,20685)),"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,92341,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,u=["/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/invites/[inviteId]/page.tsx"],d={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/u/invites/[inviteId]/page",pathname:"/u/invites/[inviteId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20276:(e,t,s)=>{"use strict";s.d(t,{E:()=>o});var r=s(13486);s(60159);var i=s(76353),a=s(26518);let n=(0,i.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...s}){return(0,r.jsx)("div",{className:(0,a.cn)(n({variant:t}),e),...s})}},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29563:(e,t,s)=>{"use strict";s.d(t,{BT:()=>l,Wu:()=>u,ZB:()=>c,Zp:()=>n,aR:()=>o,wL:()=>d});var r=s(13486),i=s(60159),a=s(26518);let n=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));n.displayName="Card";let o=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...t}));o.displayName="CardHeader";let c=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("font-semibold leading-none tracking-tight",e),...t}));c.displayName="CardTitle";let l=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",e),...t}));l.displayName="CardDescription";let u=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",e),...t}));u.displayName="CardContent";let d=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",e),...t}));d.displayName="CardFooter"},32513:(e,t,s)=>{"use strict";s.d(t,{n:()=>d});var r=s(60159),i=s(1647),a=s(59830),n=s(31605),o=s(31755),c=class extends n.Q{#e;#t=void 0;#s;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,o.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.EN)(t.mutationKey)!==(0,o.EN)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#i(),this.#a()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#i(){let e=this.#s?.state??(0,i.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#a(e){a.jG.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,t,s),this.#r.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#r.onError?.(e.error,t,s),this.#r.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#t)})})}},l=s(84364),u=s(49343);function d(e,t){let s=(0,l.jE)(t),[i]=r.useState(()=>new c(s,e));r.useEffect(()=>{i.setOptions(e)},[i,e]);let n=r.useSyncExternalStore(r.useCallback(e=>i.subscribe(a.jG.batchCalls(e)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),o=r.useCallback((e,t)=>{i.mutate(e,t).catch(u.l)},[i]);if(n.error&&(0,u.G)(i.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:o,mutateAsync:n.mutate}}},33873:e=>{"use strict";e.exports=require("path")},36903:(e,t,s)=>{Promise.resolve().then(s.bind(s,97742))},37558:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},40751:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]])},54394:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56649:(e,t,s)=>{"use strict";s.d(t,{R_:()=>d,kM:()=>p,mr:()=>u,uo:()=>l});var r=s(32513),i=s(84364),a=s(82831),n=s(91446),o=s(71441),c=s(2984);let l=()=>(0,r.n)({mutationFn:e=>(0,a.kw)(e)}),u=()=>{let{showToast:e}=(0,n.A)();return(0,r.n)({mutationFn:e=>(0,a.lY)(e),onSuccess:()=>{e({type:"success",message:"Access confirmed"})},onError:()=>{e({type:"error",message:"Error confirming access"})}})},d=()=>{let{showToast:e}=(0,n.A)(),t=(0,i.jE)(),s=(0,c.useRouter)();return(0,r.n)({mutationFn:e=>(0,a.Ql)(e),onSuccess:()=>{t.invalidateQueries({queryKey:["invites"]}),t.invalidateQueries({queryKey:["shared-vaults"]})},onError:t=>{e({type:"error",message:t?.response?.data?.message||"Error accepting invite"}),s.push(o.vc.SHARED_WITH_ME)}})},p=()=>{let{showToast:e}=(0,n.A)(),t=(0,i.jE)(),s=(0,c.useRouter)();return(0,r.n)({mutationFn:e=>(0,a.vO)(e),onSuccess:()=>{t.invalidateQueries({queryKey:["invites"]}),e({type:"success",message:"Invite rejected"})},onError:()=>{e({type:"error",message:"Error rejecting invite"}),s.push(o.vc.SHARED_WITH_ME)}})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63232:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var r=s(13486),i=s(60159),a=s(56649),n=s(2984),o=s(29563),c=s(74941),l=s(986),u=s(54394),d=s(63821),p=s(40751),h=s(37558),m=s(74439),x=s(20276),v=s(71441),f=s(82831),y=s(72055);let b=()=>{let{inviteId:e}=(0,n.useParams)(),t=(0,n.useRouter)(),[s,b]=(0,i.useState)(!1),{mutate:g,isPending:j,error:w}=(0,a.R_)(),{mutate:N,isPending:k,error:A}=(0,a.kM)(),{data:E,isLoading:R}=(0,y.I)({queryKey:["invite",e],queryFn:()=>(0,f.I_)(e)});return((0,i.useEffect)(()=>{(E?.status==="ACCEPTED"||E?.status==="REJECTED")&&t.push(v.vc.SHARED_WITH_ME)},[E,t]),j&&k||clearTimeout(setTimeout(()=>{t.push(v.vc.SHARED_WITH_ME)},2e3)),k||j)?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[70vh]",children:(0,r.jsx)(o.Zp,{className:"w-full max-w-md",children:(0,r.jsx)(o.Wu,{className:"pt-6",children:(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)("div",{className:"animate-pulse bg-primary/20 h-12 w-12 rounded-full mx-auto flex items-center justify-center",children:(0,r.jsx)(l.A,{className:"h-6 w-6 text-primary/70"})}),(0,r.jsx)("h3",{className:"text-xl font-medium",children:"Processing invitation..."}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Please wait while we verify your invitation"})]})})})}):w||A?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[70vh]",children:(0,r.jsxs)(o.Zp,{className:"w-full max-w-md border-destructive/20",children:[(0,r.jsx)(o.aR,{children:(0,r.jsx)(o.ZB,{className:"text-center text-destructive",children:"Invitation Error"})}),(0,r.jsx)(o.Wu,{children:(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)("div",{className:"bg-destructive/10 h-12 w-12 rounded-full mx-auto flex items-center justify-center",children:(0,r.jsx)(u.A,{className:"h-6 w-6 text-destructive"})}),(0,r.jsx)("p",{children:"This invitation may have expired or is no longer valid or you are not authorized to accept it"})]})}),(0,r.jsx)(o.wL,{children:(0,r.jsx)(c.$,{variant:"secondary",className:"w-full",onClick:()=>t.push(v.vc.SHARED_WITH_ME),children:"Return to Vaults"})})]})}):s?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[70vh]",children:(0,r.jsxs)(o.Zp,{className:"w-full max-w-md border-green-500/20",children:[(0,r.jsx)(o.aR,{children:(0,r.jsx)(o.ZB,{className:"text-center text-green-500",children:"Invitation Accepted"})}),(0,r.jsx)(o.Wu,{children:(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)("div",{className:"bg-green-500/10 h-16 w-16 rounded-full mx-auto flex items-center justify-center",children:(0,r.jsx)(d.A,{className:"h-8 w-8 text-green-500"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-medium mb-2",children:"Success!"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"You now have access to the shared vault."})]})]})}),(0,r.jsx)(o.wL,{children:(0,r.jsx)(c.$,{className:"w-full",onClick:()=>t.push(v.vc.VAULTS),children:"Go to Vaults"})})]})}):(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[70vh]",children:(0,r.jsxs)(o.Zp,{className:"w-full max-w-md",children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{children:"Vault Invitation"}),(0,r.jsx)(o.BT,{children:"You've been invited to collaborate on a vault"})]}),(0,r.jsx)(o.Wu,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("p",{className:"text-muted-foreground",children:"Access will be granted with the following permissions:"}),!R&&(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[E?.canView&&(0,r.jsxs)(x.E,{variant:"outline",className:"bg-blue-500/10 text-blue-500 border-blue-500/20",children:[(0,r.jsx)(l.A,{className:"h-3 w-3 mr-1"})," View Access"]}),E?.canEdit&&(0,r.jsxs)(x.E,{variant:"outline",className:"bg-green-500/10 text-green-500 border-green-500/20",children:[(0,r.jsx)(p.A,{className:"h-3 w-3 mr-1"})," Edit Access"]}),E?.canDelete&&(0,r.jsxs)(x.E,{variant:"outline",className:"bg-red-500/10 text-red-500 border-red-500/20",children:[(0,r.jsx)(h.A,{className:"h-3 w-3 mr-1"})," Delete Access"]}),E?.canAdd&&(0,r.jsxs)(x.E,{variant:"outline",className:"bg-purple-500/10 text-purple-500 border-purple-500/20",children:[(0,r.jsx)(m.A,{className:"h-3 w-3 mr-1"})," Add Secret"]})]})]})}),(0,r.jsxs)(o.wL,{className:"flex justify-between",children:[(0,r.jsx)(c.$,{variant:"outline",onClick:()=>N(e),children:"Decline"}),(0,r.jsx)(c.$,{onClick:()=>{g(e),b(!0)},children:"Accept Invitation"})]})]})})}},63821:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},67167:(e,t,s)=>{Promise.resolve().then(s.bind(s,63232))},74075:e=>{"use strict";e.exports=require("zlib")},74439:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(84667).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},82831:(e,t,s)=>{"use strict";s.d(t,{B_:()=>u,Bf:()=>c,I_:()=>o,Ql:()=>a,it:()=>l,kw:()=>i,lY:()=>d,vO:()=>n});var r=s(86218);let i=async e=>(await r.S.post("/collab/invite",e)).data,a=async e=>(await r.S.post(`/collab/accept-invite/${e}`)).data,n=async e=>(await r.S.post(`/collab/reject-invite/${e}`)).data,o=async e=>{let t=await r.S.get(`/collab/invite/${e}`);return t.data?.invite},c=async(e,t)=>{let s=await r.S.get(`/invites?type=${e||"sent"}&status=${t||"ALL"}`);return s.data?.invites},l=async e=>{let t=await r.S.get(`/collab/vault-collaborators/${e}`);return t.data?.collaborators},u=async()=>{let e=await r.S.get("/collab/shared-with-me");return e.data?.vaults},d=async e=>(await r.S.post(`/collab/confirm-access/${e.vaultId}`,{encryptedVaultKeys:e.finalData})).data},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")},97742:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/invites/[inviteId]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/invites/[inviteId]/page.tsx","default")}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[191,59,401,214,160,239,721],()=>s(2944));module.exports=r})();