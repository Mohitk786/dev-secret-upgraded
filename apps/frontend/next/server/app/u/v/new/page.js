(()=>{var e={};e.id=570,e.ids=[570],e.modules={1241:()=>{},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3642:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/v/new/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/v/new/page.tsx","default")},8476:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var s=r(13486),a=r(60159),n=r(98509),o=r(74941),i=r(23025),c=r(63627),l=r(29563),d=r(41571),p=r(85700),u=r(68830),m=r(91644),h=r(26518),x=r(50025),f=r(91446),y=r(78067);let v=n.z.object({name:n.z.string().min(2,"Name must be at least 2 characters").max(50,"Name must be less than 50 characters"),description:n.z.string().max(200,"Description must be less than 200 characters").optional(),icon:n.z.string().default("\uD83D\uDD12")}),g=["\uD83D\uDD12","\uD83D\uDD11","\uD83D\uDD10","\uD83D\uDEE1️","\uD83D\uDCCA","\uD83D\uDCBC","\uD83D\uDE80","\uD83D\uDD2E","\uD83D\uDCBE","\uD83E\uDDE9","⚙️","\uD83C\uDF08","\uD83C\uDFAE","\uD83D\uDCBB"],b=()=>{let e=(0,m.lP)(),{showToast:t}=(0,f.A)(),[r,n]=(0,a.useState)({name:"",description:"",icon:"\uD83D\uDD12"}),[b,w]=(0,a.useState)({}),A=e=>{let{name:t,value:r}=e.target;n(e=>({...e,[t]:r})),w(e=>({...e,[t]:""}))},j=async s=>{try{s.preventDefault();let t=v.safeParse(r);if(!t.success){let e={};t.error.errors.forEach(t=>{t.path[0]&&(e[t.path[0]]=t.message)}),w(e);return}let a=await (0,y.lG)();if(!a)throw Error("Public key not found");let n=await (0,x.rn)(),o=await (0,x.XT)(a,n),i={...t.data,encryptedVaultKeyBase64:o};e.mutate(i)}catch(e){console.error("Error creating vault:",e),t({type:"error",message:"Failed to create vault. Please try again."})}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[(0,s.jsx)(p.A,{className:"h-6 w-6 text-primary"})," Create New Vault"]}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Set up a new secure vault to store your development secrets."})]}),(0,s.jsxs)(l.Zp,{className:"border-primary/10",children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsx)(l.ZB,{children:"Vault Details"}),(0,s.jsx)(l.BT,{children:"Configure your new vault's properties"})]}),(0,s.jsx)(l.Wu,{children:(0,s.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.J,{htmlFor:"name",children:"Vault Name"}),(0,s.jsx)(i.p,{id:"name",name:"name",placeholder:"My Project Secrets",value:r.name,onChange:A}),b.name&&(0,s.jsx)("p",{className:"text-sm text-red-500",children:b.name}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"A descriptive name for your vault"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.J,{htmlFor:"description",children:"Description (Optional)"}),(0,s.jsx)(c.T,{id:"description",name:"description",placeholder:"Contains API keys and secrets for my development environment",className:"resize-none",value:r.description,onChange:A}),b.description&&(0,s.jsx)("p",{className:"text-sm text-red-500",children:b.description}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"A brief description of what this vault will contain"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.J,{children:"Choose an Icon"}),(0,s.jsx)("div",{className:"grid grid-cols-7 gap-2 mt-2",children:g.map(e=>(0,s.jsx)(o.$,{type:"button",variant:r.icon===e?"default":"outline",className:(0,h.cn)("h-12 w-12 text-xl",r.icon===e&&"bg-primary"),onClick:()=>n(t=>({...t,icon:e})),children:e},e))}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select an icon that represents this vault"})]})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsxs)(o.$,{type:"submit",className:"gap-2",children:[(0,s.jsx)(u.A,{className:"h-4 w-4"}),"Create Vault"]})})]})})]})]})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},23890:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(13486),a=r(74941),n=r(60159),o=r(2984),i=r(15998),c=r(3805),l=r(32131);let d=({children:e})=>{let t=(0,o.usePathname)(),r=(0,l.A)(),d=(0,o.useRouter)(),{user:p}=(0,c.h)(),u="vaults"===t.split("/").pop()||"shared-with-me"===t.split("/").pop();return(0,n.useEffect)(()=>{r.emit("authenticate",p?.id)},[p,r]),(0,s.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,s.jsx)("div",{className:"flex items-center gap-2 text-muted-foreground",children:!u&&(0,s.jsxs)(a.$,{variant:"ghost",size:"sm",className:"gap-1",onClick:()=>d.back(),children:[(0,s.jsx)(i.A,{className:"h-4 w-4"})," Back to Vaults"]})}),e]})}},24096:(e,t,r)=>{"use strict";r.d(t,{Af:()=>c,B3:()=>o,Px:()=>n,YT:()=>i,iF:()=>a});var s=r(86218);let a=async()=>{let e=await s.S.get("/vaults/all");return e.data?.vaults},n=async e=>{let t=await s.S.get(`/vaults/${e}`);return t.data?.vault},o=async e=>(await s.S.post("/vaults/create",e)).data,i=async({vaultId:e,data:t})=>(await s.S.put(`/vaults/${e}`,t)).data,c=async e=>{try{let t=await s.S.get(`/vaults/${e}/vault-key`);return t.data?.vaultKey}catch(e){return null}}},25696:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,pages:()=>d,routeModule:()=>u,tree:()=>l});var s=r(24332),a=r(48819),n=r(67851),o=r.n(n),i=r(97540),c={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);r.d(t,c);let l={children:["",{children:["u",{children:["v",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3642)),"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/v/new/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,71044)),"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/v/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,90205)),"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,20685)),"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,92341,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/v/new/page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/u/v/new/page",pathname:"/u/v/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},27661:(e,t,r)=>{Promise.resolve().then(r.bind(r,23890))},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29563:(e,t,r)=>{"use strict";r.d(t,{BT:()=>l,Wu:()=>d,ZB:()=>c,Zp:()=>o,aR:()=>i,wL:()=>p});var s=r(13486),a=r(60159),n=r(26518);let o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));o.displayName="Card";let i=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let c=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("font-semibold leading-none tracking-tight",e),...t}));c.displayName="CardTitle";let l=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));l.displayName="CardDescription";let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent";let p=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t}));p.displayName="CardFooter"},29869:(e,t,r)=>{Promise.resolve().then(r.bind(r,71044))},32131:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(60159);let a=(0,r(48234).io)("ws://localhost:8000",{transports:["websocket"],withCredentials:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3}),n={socket:a,connect:()=>{a.connect()}},o=null,i=()=>{let e=(0,s.useRef)(null);return o||(n.connect(),o=n.socket),e.current=o,(0,s.useEffect)(()=>(o?.connected||n.connect(),()=>{}),[]),e.current}},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},50025:(e,t,r)=>{"use strict";r.d(t,{MG:()=>o,XT:()=>i,rn:()=>n});var s=r(24096),a=r(55761);let n=async()=>await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),o=async(e,t)=>{let r=await (0,s.Af)(t),n=await (0,a.v)(r);if(!n)throw Error("Vault key not found");let o=JSON.stringify(e),i=crypto.getRandomValues(new Uint8Array(12)),c=new TextEncoder().encode(o),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:i},n,c),d=new Uint8Array(i.byteLength+l.byteLength);return d.set(i,0),d.set(new Uint8Array(l),i.byteLength),btoa(String.fromCharCode(...d))},i=async(e,t)=>{let r=await crypto.subtle.exportKey("raw",t),s=Uint8Array.from(atob(e),e=>e.charCodeAt(0)).buffer,a=await crypto.subtle.importKey("spki",s,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]);return btoa(String.fromCharCode(...new Uint8Array(await crypto.subtle.encrypt({name:"RSA-OAEP"},a,r))))}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},55761:(e,t,r)=>{"use strict";r.d(t,{a:()=>n,v:()=>a});var s=r(78067);let a=async e=>{let t=await (0,s.Tn)();if(!t)throw Error("Private key missing!");let r=Uint8Array.from(atob(e),e=>e.charCodeAt(0)),a=Uint8Array.from(atob(t),e=>e.charCodeAt(0)).buffer,n=await crypto.subtle.importKey("pkcs8",a,{name:"RSA-OAEP",hash:"SHA-256"},!0,["decrypt"]),o=await crypto.subtle.decrypt({name:"RSA-OAEP"},n,r);return await crypto.subtle.importKey("raw",o,{name:"AES-GCM"},!0,["encrypt","decrypt"])},n=async(e,t)=>{let r=e.encryptedSecret,s=Uint8Array.from(atob(r),e=>e.charCodeAt(0)),a=s.slice(0,12),n=s.slice(12),o=await crypto.subtle.decrypt({name:"AES-GCM",iv:a},t,n);return{...JSON.parse(new TextDecoder().decode(o)),id:e.id,vaultId:e.vaultId}}},61645:(e,t,r)=>{Promise.resolve().then(r.bind(r,3642))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63627:(e,t,r)=>{"use strict";r.d(t,{T:()=>o});var s=r(13486),a=r(60159),n=r(26518);let o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));o.displayName="Textarea"},68830:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(84667).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},71044:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/v/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/v/layout.tsx","default")},72088:()=>{},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},85613:(e,t,r)=>{Promise.resolve().then(r.bind(r,8476))},85700:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(84667).A)("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},91644:(e,t,r)=>{"use strict";r.d(t,{OQ:()=>p,lP:()=>d});var s=r(84364),a=r(32513),n=r(24096),o=r(68121),i=r(2984),c=r(91446),l=r(71441);let d=()=>{let e=(0,s.jE)(),t=(0,i.useRouter)(),{showToast:r}=(0,c.A)();return(0,a.n)({mutationFn:n.B3,onSuccess:()=>{e.invalidateQueries({queryKey:[o.e.VAULTS]}),r({type:"success",message:"Vault created successfully! ✨"}),t.push(l.vc.VAULTS)},onError:e=>r({type:"error",message:e.response?.data?.message||"Error"})})},p=()=>{let e=(0,s.jE)(),{showToast:t}=(0,c.A)();return(0,a.n)({mutationFn:n.YT,onSuccess:(r,{vaultId:s})=>{e.invalidateQueries({queryKey:[o.e.VAULTS]}),e.invalidateQueries({queryKey:o.e.VAULT(s)}),t({type:"success",message:"Vault updated!"})}})}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[191,59,401,214,160,221,989,239,721],()=>r(25696));module.exports=s})();