(()=>{var e={};e.id=379,e.ids=[379],e.modules={986:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(84667).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},1241:()=>{},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3958:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>F});var s=r(13486),a=r(60159),n=r(49989),o=r.n(n),i=r(2984),l=r(22936),c=r(74941),u=r(29563),d=r(81729),p=r(13448),m=r(20276),h=r(91446),y=r(28221),v=r(11883),x=r(9431),f=r(986),b=r(40751),g=r(37558),w=r(74439),j=r(70087),A=r(84667);let k=(0,A.A)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),N=(0,A.A)("shield-x",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]]);var C=r(29193),E=r(56649),S=r(71441),R=r(24096),M=r(50025),I=r(55761);let q=async(e,t)=>{let r=await (0,R.Af)(e),s=await (0,I.v)(r);return await Promise.all(t.map(async t=>{let r=await (0,M.XT)(t.user?.publicKey,s);return{userId:t.userId,encryptedKey:r,vaultId:e}}))};var _=r(8460),P=r(32131),O=r(3805),T=r(84364),D=r(32513),K=r(49933),$=r(86218);let F=()=>{let{vaultId:e}=(0,i.useParams)(),t=(0,P.A)(),r=(0,T.jE)(),[n,A]=(0,a.useState)(!1),[R,M]=(0,a.useState)({title:"",description1:"",description2:"",buttonText:"",onConfirm:()=>{},collaborator:null}),{data:I}=(0,l._)(e),{data:F,isLoading:G}=(0,C.Vn)(e),[H,U]=(0,a.useState)([]),{user:V}=(0,O.h)(),{mutate:L,isPending:B}=(0,E.mr)(),[z,Q]=(0,a.useState)([]),W=(0,i.useRouter)(),{showToast:X}=(0,h.A)();(0,a.useEffect)(()=>{F&&U(F)},[F]);let Y=(0,D.n)({mutationFn:async({memberId:t,permissions:r})=>$.S.patch(`/collab/vault-collaborators/${e}/${t}`,r),onSuccess:()=>{r.invalidateQueries({queryKey:["vault-collaborators",e]}),X({type:"success",message:"Permissions updated"})},onError:e=>{X({type:"error",message:e?.response?.data?.message||"Error updating permissions"})}}),Z=r=>{t.emit("remove-collaborator",{collaboratorId:r.user.id,vaultId:e})},J=(e,t)=>{if("canView"===t)return void X({type:"info",message:"Revoke client to access the vault"});let r={[t]:!e[t]};Y.mutate({memberId:e?.id,permissions:r})},ee=async()=>{let t=await q(I?.id,F);await L({finalData:t,vaultId:e})},et=async s=>{t.emit("join-vault",e),t.emit("toggle-access",{collaboratorId:s.user.id,vaultId:e}),r.invalidateQueries({queryKey:["vault-collaborators",e]})},er=async(e,t)=>{A(!0),"access_to_all"===e&&M({...S.G.access_to_all,onConfirm:ee}),"toggle_access"===e&&M({...S.G.toggle_access,onConfirm:et,collaborator:t}),"remove_collaborator"===e&&M({...S.G.remove_collaborator,onConfirm:Z,collaborator:t}),A(!0)};return(0,a.useEffect)(()=>{t.emit("join-vault",e),t.emit("get-online-users",e);let r=e=>{Q(e.onlineUsers)},s=e=>{I?.ownerId===V?.id&&(X({type:"success",message:e.message}),U(H.filter(t=>t.userId!==e.collaboratorId))),V?.id===e.collaboratorId&&(X({type:"info",message:"You have been removed from this vault."}),W.push(S.vc.SHARED_WITH_ME))};return t.on("collaborator-removed",s),t.on("online-users",r),()=>{t.off("collaborator-removed",s),t.off("online-users",r)}},[e]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Vault Collaborators"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:I?`Manage who has access to "${I.name}"`:"Manage who has access to this vault"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o(),{href:`${S.vc.VAULTS}/${e}/invite`,children:(0,s.jsxs)(c.$,{className:"flex items-center gap-2",children:[(0,s.jsx)(y.A,{className:"h-4 w-4"}),"Invite Member"]})}),(0,s.jsxs)(c.$,{className:"flex items-center gap-2 bg-green-400 hover:bg-green-600 text-black",onClick:()=>er("access_to_all"),disabled:B,children:[(0,s.jsx)(v.A,{className:"h-4 w-4"}),"Confirm Access"]})]})]}),(0,s.jsxs)(u.Zp,{children:[(0,s.jsxs)(u.aR,{children:[(0,s.jsxs)(u.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(x.A,{className:"h-5 w-5 text-primary"}),"Collaborators"]}),(0,s.jsx)(u.BT,{children:"People with access to this vault"})]}),(0,s.jsx)(u.Wu,{children:G?(0,s.jsx)("div",{className:"p-8 text-center",children:(0,s.jsx)("p",{children:"Loading collaborators..."})}):0===H.length?(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"No collaborators yet"}),(0,s.jsx)(o(),{href:`${S.vc.VAULTS}/${e}/invite`,children:(0,s.jsxs)(c.$,{variant:"outline",className:"mt-4",children:[(0,s.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Invite Collaborators"]})})]}):(0,s.jsxs)(d.XI,{children:[(0,s.jsx)(d.A0,{children:(0,s.jsxs)(d.Hj,{children:[(0,s.jsx)(d.nd,{children:"Member"}),(0,s.jsx)(d.nd,{children:"Permissions"}),I?.ownerId===V?.id&&(0,s.jsx)(d.nd,{children:"Actions"})]})}),(0,s.jsx)(d.BF,{children:H&&H.map(e=>(0,s.jsxs)(d.Hj,{children:[(0,s.jsx)(d.nA,{className:"font-medium",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e?.user?.avatarUrl?(0,s.jsx)(K.default,{src:e?.user?.avatarUrl,alt:e?.user?.name||e?.user?.email,className:"w-8 h-8 rounded-full"}):(0,s.jsx)("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary",children:e?.user?.name?.charAt(0)||e?.user?.email.charAt(0)}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"flex items-center gap-2",children:[e?.user?.name||e?.user?.email," ",z&&z.includes(e?.user?.id)&&(0,s.jsx)("span",{className:"text-green-500 text-xs",children:"Online"})]}),e?.user?.name&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:e?.user?.email})]})]})}),(0,s.jsx)(d.nA,{children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)(m.E,{variant:"outline",className:"bg-blue-500/10 text-blue-500 border-blue-500/20 cursor-not-allowed",children:[(0,s.jsx)(f.A,{className:"h-3 w-3 mr-1"})," View"]}),(0,s.jsxs)(m.E,{variant:e?.canEdit?"outline":"secondary",className:e?.canEdit?"bg-green-500/10 text-green-500 border-green-500/20 cursor-pointer":"cursor-pointer",onClick:()=>J(e,"canEdit"),children:[(0,s.jsx)(b.A,{className:"h-3 w-3 mr-1"})," Edit"]}),(0,s.jsxs)(m.E,{variant:e?.canDelete?"outline":"secondary",className:e?.canDelete?"bg-red-500/10 text-red-500 border-red-500/20 cursor-pointer":"cursor-pointer",onClick:()=>J(e,"canDelete"),children:[(0,s.jsx)(g.A,{className:"h-3 w-3 mr-1"})," Delete"]}),(0,s.jsxs)(m.E,{variant:e?.canAdd?"outline":"secondary",className:e?.canAdd?"bg-blue-500/10 text-blue-500 border-blue-500/20 cursor-pointer":"cursor-pointer",onClick:()=>J(e,"canAdd"),children:[(0,s.jsx)(w.A,{className:"h-3 w-3 mr-1"})," Add"]})]})}),I?.ownerId===V?.id&&(0,s.jsx)(d.nA,{children:(0,s.jsxs)(p.rI,{children:[(0,s.jsx)(p.ty,{asChild:!0,children:(0,s.jsx)(c.$,{variant:"ghost",size:"icon",children:(0,s.jsx)(j.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(p.SQ,{align:"end",children:[(0,s.jsxs)(p._2,{className:"text-destructive focus:bg-destructive/10 focus:text-destructive cursor-pointer",onClick:()=>er("remove_collaborator",e),children:[(0,s.jsx)(k,{className:"h-4 w-4 mr-2"}),"Remove Member"]}),(0,s.jsxs)(p._2,{className:`${e?.hasSecretAccess?"text-red-600 cursor-pointer":"text-green-600 cursor-pointer"}`,onClick:()=>er("toggle_access",e),children:[e?.hasSecretAccess?(0,s.jsx)(N,{className:"h-4 w-4 mr-2"}):(0,s.jsx)(v.A,{className:"h-4 w-4 mr-2"}),e?.hasSecretAccess?"Revoke Access":"Allow Access"]})]})]})})]},e?.id))})]})})]}),(0,s.jsx)(_.A,{open:n,onOpenChange:A,modalData:R})]})})}},9431:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(84667).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(13486),a=r(60159),n=r(32131),o=r(2984);let i=({children:e})=>{let t=(0,n.A)(),{vaultId:r}=(0,o.useParams)();return(0,a.useEffect)(()=>{t.emit("join-vault",r)},[r,t]),(0,s.jsx)(s.Fragment,{children:e})}},12202:(e,t,r)=>{Promise.resolve().then(r.bind(r,86139))},12412:e=>{"use strict";e.exports=require("assert")},15994:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>d,pages:()=>u,routeModule:()=>p,tree:()=>c});var s=r(24332),a=r(48819),n=r(67851),o=r.n(n),i=r(97540),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c={children:["",{children:["u",{children:["v",{children:["[vaultId]",{children:["collaborators",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,86139)),"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/v/[vaultId]/collaborators/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,39486)),"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/v/[vaultId]/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,71044)),"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/v/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,90205)),"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,20685)),"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19033,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,39956,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,92341,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,9699))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,u=["/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/v/[vaultId]/collaborators/page.tsx"],d={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/u/v/[vaultId]/collaborators/page",pathname:"/u/v/[vaultId]/collaborators",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20276:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});var s=r(13486);r(60159);var a=r(76353),n=r(26518);let o=(0,a.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:t,...r}){return(0,s.jsx)("div",{className:(0,n.cn)(o({variant:t}),e),...r})}},21820:e=>{"use strict";e.exports=require("os")},22936:(e,t,r)=>{"use strict";r.d(t,{N:()=>o,_:()=>i});var s=r(72055),a=r(24096),n=r(68121);let o=()=>(0,s.I)({queryKey:[n.e.VAULTS],queryFn:a.iF}),i=e=>(0,s.I)({queryKey:n.e.VAULT(e),queryFn:()=>(0,a.Px)(e),enabled:!!e})},23890:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(13486),a=r(74941),n=r(60159),o=r(2984),i=r(15998),l=r(3805),c=r(32131);let u=({children:e})=>{let t=(0,o.usePathname)(),r=(0,c.A)(),u=(0,o.useRouter)(),{user:d}=(0,l.h)(),p="vaults"===t.split("/").pop()||"shared-with-me"===t.split("/").pop();return(0,n.useEffect)(()=>{r.emit("authenticate",d?.id)},[d,r]),(0,s.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,s.jsx)("div",{className:"flex items-center gap-2 text-muted-foreground",children:!p&&(0,s.jsxs)(a.$,{variant:"ghost",size:"sm",className:"gap-1",onClick:()=>u.back(),children:[(0,s.jsx)(i.A,{className:"h-4 w-4"})," Back to Vaults"]})}),e]})}},24096:(e,t,r)=>{"use strict";r.d(t,{Af:()=>l,B3:()=>o,Px:()=>n,YT:()=>i,iF:()=>a});var s=r(86218);let a=async()=>{let e=await s.S.get("/vaults/all");return e.data?.vaults},n=async e=>{let t=await s.S.get(`/vaults/${e}`);return t.data?.vault},o=async e=>(await s.S.post("/vaults/create",e)).data,i=async({vaultId:e,data:t})=>(await s.S.put(`/vaults/${e}`,t)).data,l=async e=>{try{let t=await s.S.get(`/vaults/${e}/vault-key`);return t.data?.vaultKey}catch(e){return null}}},27661:(e,t,r)=>{Promise.resolve().then(r.bind(r,23890))},27910:e=>{"use strict";e.exports=require("stream")},28221:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(84667).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29193:(e,t,r)=>{"use strict";r.d(t,{Gy:()=>i,Vn:()=>l,pE:()=>c,si:()=>o});var s=r(72055),a=r(82831),n=r(24096);let o=(e,t)=>{let{data:r,isLoading:n,error:o,refetch:i}=(0,s.I)({queryKey:["invites",e,t],queryFn:()=>(0,a.Bf)(e,t)});return{data:r,isLoading:n,error:o,refetch:i}},i=()=>{let{data:e,isLoading:t,error:r,refetch:n}=(0,s.I)({queryKey:["shared-vaults"],queryFn:a.B_});return{data:e,isLoading:t,error:r,refetch:n}},l=e=>(0,s.I)({queryKey:["vault-collaborators",e],queryFn:()=>(0,a.it)(e),enabled:!!e}),c=e=>(0,s.I)({queryKey:["vault-key",e],queryFn:()=>(0,n.Af)(e),enabled:!!e})},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29563:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>u,ZB:()=>l,Zp:()=>o,aR:()=>i,wL:()=>d});var s=r(13486),a=r(60159),n=r(26518);let o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));o.displayName="Card";let i=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let l=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let c=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let u=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...t}));u.displayName="CardContent";let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t}));d.displayName="CardFooter"},29869:(e,t,r)=>{Promise.resolve().then(r.bind(r,71044))},32131:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(60159);let a=(0,r(48234).io)("ws://localhost:8000",{transports:["websocket"],withCredentials:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3}),n={socket:a,connect:()=>{a.connect()}},o=null,i=()=>{let e=(0,s.useRef)(null);return o||(n.connect(),o=n.socket),e.current=o,(0,s.useEffect)(()=>(o?.connected||n.connect(),()=>{}),[]),e.current}},32513:(e,t,r)=>{"use strict";r.d(t,{n:()=>d});var s=r(60159),a=r(1647),n=r(59830),o=r(31605),i=r(31755),l=class extends o.Q{#e;#t=void 0;#r;#s;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,i.f8)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,i.EN)(t.mutationKey)!==(0,i.EN)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#n(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#a(),this.#n()}mutate(e,t){return this.#s=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#a(){let e=this.#r?.state??(0,a.$)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#n(e){n.jG.batch(()=>{if(this.#s&&this.hasListeners()){let t=this.#t.variables,r=this.#t.context;e?.type==="success"?(this.#s.onSuccess?.(e.data,t,r),this.#s.onSettled?.(e.data,null,t,r)):e?.type==="error"&&(this.#s.onError?.(e.error,t,r),this.#s.onSettled?.(void 0,e.error,t,r))}this.listeners.forEach(e=>{e(this.#t)})})}},c=r(84364),u=r(49343);function d(e,t){let r=(0,c.jE)(t),[a]=s.useState(()=>new l(r,e));s.useEffect(()=>{a.setOptions(e)},[a,e]);let o=s.useSyncExternalStore(s.useCallback(e=>a.subscribe(n.jG.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=s.useCallback((e,t)=>{a.mutate(e,t).catch(u.l)},[a]);if(o.error&&(0,u.G)(a.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:i,mutateAsync:o.mutate}}},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37558:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(84667).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},39486:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/v/[vaultId]/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/v/[vaultId]/layout.tsx","default")},40751:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(84667).A)("pen-line",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]])},50025:(e,t,r)=>{"use strict";r.d(t,{MG:()=>o,XT:()=>i,rn:()=>n});var s=r(24096),a=r(55761);let n=async()=>await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),o=async(e,t)=>{let r=await (0,s.Af)(t),n=await (0,a.v)(r);if(!n)throw Error("Vault key not found");let o=JSON.stringify(e),i=crypto.getRandomValues(new Uint8Array(12)),l=new TextEncoder().encode(o),c=await crypto.subtle.encrypt({name:"AES-GCM",iv:i},n,l),u=new Uint8Array(i.byteLength+c.byteLength);return u.set(i,0),u.set(new Uint8Array(c),i.byteLength),btoa(String.fromCharCode(...u))},i=async(e,t)=>{let r=await crypto.subtle.exportKey("raw",t),s=Uint8Array.from(atob(e),e=>e.charCodeAt(0)).buffer,a=await crypto.subtle.importKey("spki",s,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]);return btoa(String.fromCharCode(...new Uint8Array(await crypto.subtle.encrypt({name:"RSA-OAEP"},a,r))))}},51954:(e,t,r)=>{Promise.resolve().then(r.bind(r,3958))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},55761:(e,t,r)=>{"use strict";r.d(t,{a:()=>n,v:()=>a});var s=r(78067);let a=async e=>{let t=await (0,s.Tn)();if(!t)throw Error("Private key missing!");let r=Uint8Array.from(atob(e),e=>e.charCodeAt(0)),a=Uint8Array.from(atob(t),e=>e.charCodeAt(0)).buffer,n=await crypto.subtle.importKey("pkcs8",a,{name:"RSA-OAEP",hash:"SHA-256"},!0,["decrypt"]),o=await crypto.subtle.decrypt({name:"RSA-OAEP"},n,r);return await crypto.subtle.importKey("raw",o,{name:"AES-GCM"},!0,["encrypt","decrypt"])},n=async(e,t)=>{let r=e.encryptedSecret,s=Uint8Array.from(atob(r),e=>e.charCodeAt(0)),a=s.slice(0,12),n=s.slice(12),o=await crypto.subtle.decrypt({name:"AES-GCM",iv:a},t,n);return{...JSON.parse(new TextDecoder().decode(o)),id:e.id,vaultId:e.vaultId}}},56649:(e,t,r)=>{"use strict";r.d(t,{R_:()=>d,kM:()=>p,mr:()=>u,uo:()=>c});var s=r(32513),a=r(84364),n=r(82831),o=r(91446),i=r(71441),l=r(2984);let c=()=>(0,s.n)({mutationFn:e=>(0,n.kw)(e)}),u=()=>{let{showToast:e}=(0,o.A)();return(0,s.n)({mutationFn:e=>(0,n.lY)(e),onSuccess:()=>{e({type:"success",message:"Access confirmed"})},onError:()=>{e({type:"error",message:"Error confirming access"})}})},d=()=>{let{showToast:e}=(0,o.A)(),t=(0,a.jE)(),r=(0,l.useRouter)();return(0,s.n)({mutationFn:e=>(0,n.Ql)(e),onSuccess:()=>{t.invalidateQueries({queryKey:["invites"]}),t.invalidateQueries({queryKey:["shared-vaults"]})},onError:t=>{e({type:"error",message:t?.response?.data?.message||"Error accepting invite"}),r.push(i.vc.SHARED_WITH_ME)}})},p=()=>{let{showToast:e}=(0,o.A)(),t=(0,a.jE)(),r=(0,l.useRouter)();return(0,s.n)({mutationFn:e=>(0,n.vO)(e),onSuccess:()=>{t.invalidateQueries({queryKey:["invites"]}),e({type:"success",message:"Invite rejected"})},onError:()=>{e({type:"error",message:"Error rejecting invite"}),r.push(i.vc.SHARED_WITH_ME)}})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70087:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(84667).A)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},71044:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/v/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/v/layout.tsx","default")},72088:()=>{},74075:e=>{"use strict";e.exports=require("zlib")},74439:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(84667).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},81630:e=>{"use strict";e.exports=require("http")},81729:(e,t,r)=>{"use strict";r.d(t,{A0:()=>i,BF:()=>l,Hj:()=>c,XI:()=>o,nA:()=>d,nd:()=>u});var s=r(13486),a=r(60159),n=r(26518);let o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:r,className:(0,n.cn)("w-full caption-bottom text-sm",e),...t})}));o.displayName="Table";let i=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("thead",{ref:r,className:(0,n.cn)("[&_tr]:border-b",e),...t}));i.displayName="TableHeader";let l=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tbody",{ref:r,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...t}));l.displayName="TableBody",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tfoot",{ref:r,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let c=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tr",{ref:r,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));c.displayName="TableRow";let u=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("th",{ref:r,className:(0,n.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));u.displayName="TableHead";let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("td",{ref:r,className:(0,n.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));d.displayName="TableCell",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("caption",{ref:r,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},82831:(e,t,r)=>{"use strict";r.d(t,{B_:()=>u,Bf:()=>l,I_:()=>i,Ql:()=>n,it:()=>c,kw:()=>a,lY:()=>d,vO:()=>o});var s=r(86218);let a=async e=>(await s.S.post("/collab/invite",e)).data,n=async e=>(await s.S.post(`/collab/accept-invite/${e}`)).data,o=async e=>(await s.S.post(`/collab/reject-invite/${e}`)).data,i=async e=>{let t=await s.S.get(`/collab/invite/${e}`);return t.data?.invite},l=async(e,t)=>{let r=await s.S.get(`/invites?type=${e||"sent"}&status=${t||"ALL"}`);return r.data?.invites},c=async e=>{let t=await s.S.get(`/collab/vault-collaborators/${e}`);return t.data?.collaborators},u=async()=>{let e=await s.S.get("/collab/shared-with-me");return e.data?.vaults},d=async e=>(await s.S.post(`/collab/confirm-access/${e.vaultId}`,{encryptedVaultKeys:e.finalData})).data},83997:e=>{"use strict";e.exports=require("tty")},86139:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(33952).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/v/[vaultId]/collaborators/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/mohit/Desktop/startup/dev-secret-keepr/apps/frontend/src/app/u/v/[vaultId]/collaborators/page.tsx","default")},87025:(e,t,r)=>{Promise.resolve().then(r.bind(r,11440))},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96753:(e,t,r)=>{Promise.resolve().then(r.bind(r,39486))}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[191,59,401,214,160,221,239,721],()=>r(15994));module.exports=s})();