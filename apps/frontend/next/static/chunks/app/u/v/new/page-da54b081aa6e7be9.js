(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3570],{276:(e,t,r)=>{"use strict";r.d(t,{Af:()=>l,B3:()=>n,Px:()=>o,YT:()=>i,iF:()=>s});var a=r(3084);let s=async()=>{var e;return null==(e=(await a.S.get("/vaults/all")).data)?void 0:e.vaults},o=async e=>{var t;return null==(t=(await a.S.get("/vaults/".concat(e))).data)?void 0:t.vault},n=async e=>(await a.S.post("/vaults/create",e)).data,i=async e=>{let{vaultId:t,data:r}=e;return(await a.S.put("/vaults/".concat(t),r)).data},l=async e=>{try{var t;return null==(t=(await a.S.get("/vaults/".concat(e,"/vault-key"))).data)?void 0:t.vaultKey}catch(e){return null}}},1217:(e,t,r)=>{"use strict";r.d(t,{MG:()=>n,XT:()=>i,rn:()=>o});var a=r(276),s=r(2905);let o=async()=>await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),n=async(e,t)=>{let r=await (0,a.Af)(t),o=await (0,s.v)(r);if(!o)throw Error("Vault key not found");let n=JSON.stringify(e),i=crypto.getRandomValues(new Uint8Array(12)),l=new TextEncoder().encode(n),c=await crypto.subtle.encrypt({name:"AES-GCM",iv:i},o,l),d=new Uint8Array(i.byteLength+c.byteLength);return d.set(i,0),d.set(new Uint8Array(c),i.byteLength),btoa(String.fromCharCode(...d))},i=async(e,t)=>{let r=await crypto.subtle.exportKey("raw",t),a=Uint8Array.from(atob(e),e=>e.charCodeAt(0)).buffer,s=await crypto.subtle.importKey("spki",a,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]);return btoa(String.fromCharCode(...new Uint8Array(await crypto.subtle.encrypt({name:"RSA-OAEP"},s,r))))}},1326:(e,t,r)=>{"use strict";r.d(t,{C1:()=>d,G:()=>h,RF:()=>m,_L:()=>p,vc:()=>u});var a=r(731),s=r(8825),o=r(7851),n=r(5774),i=r(3385),l=r(4508),c=r(5945);let d="http://localhost:5000/api",u={DASHBOARD:"/u/dashboard",VAULTS:"/u/v",VAULTS_NEW:"/u/v/new",VAULT_DETAIL:"/u/v/:vaultId",VAULT_DETAIL_SHARED:"/u/v/shared",SHARED_WITH_ME:"/u/shared-with-me",INVITES:"/u/invites",INVITE_DETAIL:"/u/invites/:inviteId",AUDIT_LOGS:"/u/audit-logs",RECYCLE_BIN:"/u/recycle-bin",SETTINGS:"/u/settings",PROFILE:"/u/profile",LOGIN:"/login",SIGNUP:"/signup",PRICING:"/u/pricing"},m=[{title:"Dashboard",icon:a.A,href:u.DASHBOARD},{title:"Vaults",icon:s.A,href:u.VAULTS},{title:"Shared with me",icon:o.A,href:u.SHARED_WITH_ME},{title:"Invites",icon:n.A,href:u.INVITES},{title:"Recycle Bin",icon:i.A,href:u.RECYCLE_BIN},{title:"Settings",icon:l.A,href:u.SETTINGS}],p=[{title:"Upgrade",icon:c.A,href:u.PRICING}];c.A,u.PRICING,c.A,u.PRICING,c.A,u.PRICING;let h={access_to_all:{title:"Confirm Access",description1:"Are you sure you want to confirm access to all collaborators?",description2:"This will allow all collaborators to access the vault",buttonText:"Confirm"},toggle_access:{title:"Toggle Access",description1:"Are you sure you want to allow access to the collaborator?",description2:"This will allow the collaborator to access the vault",buttonText:"Confirm"},remove_collaborator:{title:"Remove Collaborator",description1:"Are you sure you want to remove the collaborator?",description2:"This will remove the collaborator from the vault",buttonText:"Confirm"}}},1398:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r(4568),s=r(7620),o=r(880),n=r(7227),i=r(5165),l=r(7129),c=r(3353),d=r(2555),u=r(1778),m=r(2935),p=r(3094),h=r(3928),f=r(1217),y=r(8284),v=r(9305);let b=o.z.object({name:o.z.string().min(2,"Name must be at least 2 characters").max(50,"Name must be less than 50 characters"),description:o.z.string().max(200,"Description must be less than 200 characters").optional(),icon:o.z.string().default("\uD83D\uDD12")}),g=["\uD83D\uDD12","\uD83D\uDD11","\uD83D\uDD10","\uD83D\uDEE1️","\uD83D\uDCCA","\uD83D\uDCBC","\uD83D\uDE80","\uD83D\uDD2E","\uD83D\uDCBE","\uD83E\uDDE9","⚙️","\uD83C\uDF08","\uD83C\uDFAE","\uD83D\uDCBB"],x=()=>{let e=(0,p.lP)(),{showToast:t}=(0,y.A)(),[r,o]=(0,s.useState)({name:"",description:"",icon:"\uD83D\uDD12"}),[x,w]=(0,s.useState)({}),A=e=>{let{name:t,value:r}=e.target;o(e=>({...e,[t]:r})),w(e=>({...e,[t]:""}))},N=async a=>{try{a.preventDefault();let t=b.safeParse(r);if(!t.success){let e={};t.error.errors.forEach(t=>{t.path[0]&&(e[t.path[0]]=t.message)}),w(e);return}let s=await (0,v.lG)();if(!s)throw Error("Public key not found");let o=await (0,f.rn)(),n=await (0,f.XT)(s,o),i={...t.data,encryptedVaultKeyBase64:n};e.mutate(i)}catch(e){console.error("Error creating vault:",e),t({type:"error",message:"Failed to create vault. Please try again."})}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"h-6 w-6 text-primary"})," Create New Vault"]}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Set up a new secure vault to store your development secrets."})]}),(0,a.jsxs)(c.Zp,{className:"border-primary/10",children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{children:"Vault Details"}),(0,a.jsx)(c.BT,{children:"Configure your new vault's properties"})]}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"name",children:"Vault Name"}),(0,a.jsx)(i.p,{id:"name",name:"name",placeholder:"My Project Secrets",value:r.name,onChange:A}),x.name&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:x.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"A descriptive name for your vault"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"description",children:"Description (Optional)"}),(0,a.jsx)(l.T,{id:"description",name:"description",placeholder:"Contains API keys and secrets for my development environment",className:"resize-none",value:r.description,onChange:A}),x.description&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:x.description}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"A brief description of what this vault will contain"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{children:"Choose an Icon"}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-2 mt-2",children:g.map(e=>(0,a.jsx)(n.$,{type:"button",variant:r.icon===e?"default":"outline",className:(0,h.cn)("h-12 w-12 text-xl",r.icon===e&&"bg-primary"),onClick:()=>o(t=>({...t,icon:e})),children:e},e))}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select an icon that represents this vault"})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(n.$,{type:"submit",className:"gap-2",children:[(0,a.jsx)(m.A,{className:"h-4 w-4"}),"Create Vault"]})})]})})]})]})}},2555:(e,t,r)=>{"use strict";r.d(t,{J:()=>c});var a=r(4568),s=r(7620),o=r(6559),n=r(615),i=r(3928);let l=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(o.b,{ref:t,className:(0,i.cn)(l(),r),...s})});c.displayName=o.b.displayName},2905:(e,t,r)=>{"use strict";r.d(t,{a:()=>o,v:()=>s});var a=r(9305);let s=async e=>{let t=await (0,a.Tn)();if(!t)throw Error("Private key missing!");let r=Uint8Array.from(atob(e),e=>e.charCodeAt(0)),s=Uint8Array.from(atob(t),e=>e.charCodeAt(0)).buffer,o=await crypto.subtle.importKey("pkcs8",s,{name:"RSA-OAEP",hash:"SHA-256"},!0,["decrypt"]),n=await crypto.subtle.decrypt({name:"RSA-OAEP"},o,r);return await crypto.subtle.importKey("raw",n,{name:"AES-GCM"},!0,["encrypt","decrypt"])},o=async(e,t)=>{let r=e.encryptedSecret,a=Uint8Array.from(atob(r),e=>e.charCodeAt(0)),s=a.slice(0,12),o=a.slice(12),n=await crypto.subtle.decrypt({name:"AES-GCM",iv:s},t,o);return{...JSON.parse(new TextDecoder().decode(n)),id:e.id,vaultId:e.vaultId}}},3084:(e,t,r)=>{"use strict";r.d(t,{S:()=>o});var a=r(9329),s=r(4338);let o=a.A.create({baseURL:s.env.BASE_URL||"http://localhost:5000/api",withCredentials:!0})},3094:(e,t,r)=>{"use strict";r.d(t,{OQ:()=>u,lP:()=>d});var a=r(7606),s=r(6258),o=r(276),n=r(5431),i=r(2942),l=r(8284),c=r(1326);let d=()=>{let e=(0,a.jE)(),t=(0,i.useRouter)(),{showToast:r}=(0,l.A)();return(0,s.n)({mutationFn:o.B3,onSuccess:()=>{e.invalidateQueries({queryKey:[n.e.VAULTS]}),r({type:"success",message:"Vault created successfully! ✨"}),t.push(c.vc.VAULTS)},onError:e=>{var t,a;return r({type:"error",message:(null==(a=e.response)||null==(t=a.data)?void 0:t.message)||"Error"})}})},u=()=>{let e=(0,a.jE)(),{showToast:t}=(0,l.A)();return(0,s.n)({mutationFn:o.YT,onSuccess:(r,a)=>{let{vaultId:s}=a;e.invalidateQueries({queryKey:[n.e.VAULTS]}),e.invalidateQueries({queryKey:n.e.VAULT(s)}),t({type:"success",message:"Vault updated!"})}})}},3353:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>n,aR:()=>i,wL:()=>u});var a=r(4568),s=r(7620),o=r(3928);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...s})});n.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},3928:(e,t,r)=>{"use strict";r.d(t,{cn:()=>o});var a=r(2987),s=r(607);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},5165:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var a=r(4568),s=r(7620),o=r(3928);let n=s.forwardRef((e,t)=>{let{className:r,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,o.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});n.displayName="Input"},5431:(e,t,r)=>{"use strict";r.d(t,{e:()=>a});let a={VAULTS:"vaults",VAULT:e=>["vault",e],USER:"user",SECRETS:"secrets",SECRET:e=>["secret",e],VAULT_SECRETS:"vault_secrets"}},7129:(e,t,r)=>{"use strict";r.d(t,{T:()=>n});var a=r(4568),s=r(7620),o=r(3928);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("textarea",{className:(0,o.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...s})});n.displayName="Textarea"},7227:(e,t,r)=>{"use strict";r.d(t,{$:()=>c,r:()=>l});var a=r(4568),s=r(7620),o=r(9649),n=r(615),i=r(3928);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:c=!1,...d}=e,u=c?o.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(l({variant:s,size:n,className:r})),ref:t,...d})});c.displayName="Button"},8284:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(138);r(7987);let s=()=>({showToast:e=>{let{type:t,message:r}=e,s={position:"bottom-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0};switch(t){case"success":s={...s,className:"bg-green-500 text-white font-bold p-4 rounded-lg shadow-md transform transition-all duration-500 hover:scale-105"},a.oR.success(r,s);break;case"error":s={...s,className:"bg-red-500 text-white font-bold p-4 rounded-lg shadow-md transform transition-all duration-500 hover:scale-105"},a.oR.error(r,s);break;case"info":s={...s,className:"bg-blue-500 text-white font-bold p-4 rounded-lg shadow-md transform transition-all duration-500 hover:scale-105"},a.oR.info(r,s);break;default:s={...s,className:"bg-gray-500 text-white font-bold p-4 rounded-lg shadow-md transform transition-all duration-500 hover:scale-105"},(0,a.oR)(r,s)}}})},9211:(e,t,r)=>{Promise.resolve().then(r.bind(r,1398))},9305:(e,t,r)=>{"use strict";r.d(t,{Tn:()=>s,Tu:()=>o,Zd:()=>a,lG:()=>n});let a=async()=>{let e=await window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"]),t=await crypto.subtle.exportKey("spki",e.publicKey),r=await crypto.subtle.exportKey("pkcs8",e.privateKey),a=btoa(String.fromCharCode(...new Uint8Array(t))),s=btoa(String.fromCharCode(...new Uint8Array(r)));localStorage.setItem("PRIVATE_KEY",s);let o=new Blob([s],{type:"text/plain"}),n=document.createElement("a");return n.href=URL.createObjectURL(o),n.download="vault-private-key.txt",document.body.appendChild(n),n.click(),document.body.removeChild(n),a},s=()=>localStorage.getItem("PRIVATE_KEY"),o=async e=>{try{let t=e.replace("-----BEGIN PRIVATE KEY-----","").replace("-----END PRIVATE KEY-----","").replace(/\s/g,""),r=Uint8Array.from(atob(t),e=>e.charCodeAt(0));return await window.crypto.subtle.importKey("pkcs8",r.buffer,{name:"RSA-OAEP",hash:"SHA-256"},!1,["decrypt"]),!0}catch(e){return console.error("Invalid private key:",e),!1}},n=()=>{let e=localStorage.getItem("PUBLIC_KEY");if(!e)throw Error("Public key not found");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[3038,8745,9329,138,3644,809,1162,587,8315,7358],()=>t(9211)),_N_E=e.O()}]);