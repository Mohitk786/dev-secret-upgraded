(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3872],{2942:(e,s,t)=>{"use strict";var a=t(2418);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},3872:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(8889).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},4073:(e,s,t)=>{Promise.resolve().then(t.bind(t,5700))},4529:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(8889).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5191:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(8889).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},5700:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var a=t(4568),l=t(7620),r=t(8043),i=t(2942),c=t(3353),n=t(7227),d=t(3872),u=t(1356),h=t(5191),x=t(9877),m=t(8262),o=t(4529),j=t(4148),v=t(1326),p=t(5753),f=t(1416);let N=()=>{let{inviteId:e}=(0,i.useParams)(),s=(0,i.useRouter)(),[t,N]=(0,l.useState)(!1),{mutate:w,isPending:y,error:A}=(0,r.R_)(),{mutate:g,isPending:b,error:E}=(0,r.kM)(),{data:k,isLoading:_}=(0,f.I)({queryKey:["invite",e],queryFn:()=>(0,p.I_)(e)});return((0,l.useEffect)(()=>{((null==k?void 0:k.status)==="ACCEPTED"||(null==k?void 0:k.status)==="REJECTED")&&s.push(v.vc.SHARED_WITH_ME)},[k,s]),y&&b||clearTimeout(setTimeout(()=>{s.push(v.vc.SHARED_WITH_ME)},2e3)),b||y)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[70vh]",children:(0,a.jsx)(c.Zp,{className:"w-full max-w-md",children:(0,a.jsx)(c.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"animate-pulse bg-primary/20 h-12 w-12 rounded-full mx-auto flex items-center justify-center",children:(0,a.jsx)(d.A,{className:"h-6 w-6 text-primary/70"})}),(0,a.jsx)("h3",{className:"text-xl font-medium",children:"Processing invitation..."}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Please wait while we verify your invitation"})]})})})}):A||E?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[70vh]",children:(0,a.jsxs)(c.Zp,{className:"w-full max-w-md border-destructive/20",children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{className:"text-center text-destructive",children:"Invitation Error"})}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"bg-destructive/10 h-12 w-12 rounded-full mx-auto flex items-center justify-center",children:(0,a.jsx)(u.A,{className:"h-6 w-6 text-destructive"})}),(0,a.jsx)("p",{children:"This invitation may have expired or is no longer valid or you are not authorized to accept it"})]})}),(0,a.jsx)(c.wL,{children:(0,a.jsx)(n.$,{variant:"secondary",className:"w-full",onClick:()=>s.push(v.vc.SHARED_WITH_ME),children:"Return to Vaults"})})]})}):t?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[70vh]",children:(0,a.jsxs)(c.Zp,{className:"w-full max-w-md border-green-500/20",children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{className:"text-center text-green-500",children:"Invitation Accepted"})}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"bg-green-500/10 h-16 w-16 rounded-full mx-auto flex items-center justify-center",children:(0,a.jsx)(h.A,{className:"h-8 w-8 text-green-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-medium mb-2",children:"Success!"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"You now have access to the shared vault."})]})]})}),(0,a.jsx)(c.wL,{children:(0,a.jsx)(n.$,{className:"w-full",onClick:()=>s.push(v.vc.VAULTS),children:"Go to Vaults"})})]})}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[70vh]",children:(0,a.jsxs)(c.Zp,{className:"w-full max-w-md",children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{children:"Vault Invitation"}),(0,a.jsx)(c.BT,{children:"You've been invited to collaborate on a vault"})]}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Access will be granted with the following permissions:"}),!_&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(null==k?void 0:k.canView)&&(0,a.jsxs)(j.E,{variant:"outline",className:"bg-blue-500/10 text-blue-500 border-blue-500/20",children:[(0,a.jsx)(d.A,{className:"h-3 w-3 mr-1"})," View Access"]}),(null==k?void 0:k.canEdit)&&(0,a.jsxs)(j.E,{variant:"outline",className:"bg-green-500/10 text-green-500 border-green-500/20",children:[(0,a.jsx)(x.A,{className:"h-3 w-3 mr-1"})," Edit Access"]}),(null==k?void 0:k.canDelete)&&(0,a.jsxs)(j.E,{variant:"outline",className:"bg-red-500/10 text-red-500 border-red-500/20",children:[(0,a.jsx)(m.A,{className:"h-3 w-3 mr-1"})," Delete Access"]}),(null==k?void 0:k.canAdd)&&(0,a.jsxs)(j.E,{variant:"outline",className:"bg-purple-500/10 text-purple-500 border-purple-500/20",children:[(0,a.jsx)(o.A,{className:"h-3 w-3 mr-1"})," Add Secret"]})]})]})}),(0,a.jsxs)(c.wL,{className:"flex justify-between",children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>g(e),children:"Decline"}),(0,a.jsx)(n.$,{onClick:()=>{w(e),N(!0)},children:"Accept Invitation"})]})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[3038,8745,9329,8903,1416,138,3644,9990,587,8315,7358],()=>s(4073)),_N_E=e.O()}]);